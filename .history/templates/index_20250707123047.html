<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Knife Gate Valve Configurator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
  <div class="container">
    <h1>Knife Gate Valve Configuration</h1>
    <form method="POST" action="/generate">
      
      <!-- Process Information -->
      <h4 class="mt-4">1. Process Information</h4>

      <label class="form-label">Fluid Type</label>
      <select class="form-control mb-2" name="fluid" required>
        <option value="">-- Select --</option>
        <option>Water</option>
        <option>Wastewater</option>
        <option>Slurry</option>
        <option>Oil</option>
        <option>Acid</option>
        <option>Steam</option>
        <option>Gas</option>
      </select>

      <label class="form-label">Solid Content</label>
      <select class="form-control mb-2" name="solid_content">
        <option value="">-- Select --</option>
        <option>None</option>
        <option>Low (e.g. fibers)</option>
        <option>Medium (e.g. sludge)</option>
        <option>High (e.g. abrasive slurry)</option>
      </select>

      <label class="form-label">Flow Direction</label>
      <select class="form-control mb-2" name="flow_direction">
        <option value="">-- Select --</option>
        <option>Unidirectional</option>
        <option>Bidirectional</option>
      </select>

      <input class="form-control mb-2" type="number" name="pressure" placeholder="Operating Pressure (bar)" required>
      <input class="form-control mb-2" type="number" name="temperature" placeholder="Temperature (Â°C)" required>
      <input class="form-control mb-2" type="text" name="line_size" placeholder="Line Size (DN)">
      
      <label class="form-label">Installation Position</label>
      <select class="form-control mb-2" name="installation_position">
        <option value="">-- Select --</option>
        <option>Horizontal</option>
        <option>Vertical</option>
        <option>Inclined</option>
      </select>

      <!-- Valve Design -->
      <h4 class="mt-4">2. Valve Design Specifications</h4>

      <label class="form-label">Body Material</label>
      <select class="form-control mb-2" name="body_material">
        <option value="">-- Select --</option>
        <option>Cast Iron</option>
        <option>Ductile Iron</option>
        <option>Stainless Steel</option>
        <option>Carbon Steel</option>
      </select>

      <label class="form-label">Seat Type</label>
      <select class="form-control mb-2" name="seat_type">
        <option value="">-- Select --</option>
        <option>EPDM</option>
        <option>NBR</option>
        <option>PTFE</option>
        <option>Metal</option>
      </select>

      <label class="form-label">Gate Material</label>
      <select class="form-control mb-2" name="gate_material">
        <option value="">-- Select --</option>
        <option>Stainless Steel</option>
        <option>Duplex</option>
        <option>Hardened Steel</option>
      </select>

      <label class="form-label">Port Design</label>
      <select class="form-control mb-2" name="port_design">
        <option value="">-- Select --</option>
        <option>Full Bore</option>
        <option>Reduced Bore</option>
      </select>

      <label class="form-label">Flange Type</label>
      <select class="form-control mb-2" name="flange_type">
        <option value="">-- Select --</option>
        <option>PN10</option>
        <option>PN16</option>
        <option>ANSI 150</option>
        <option>Wafer</option>
        <option>Lug</option>
      </select>

      <!-- Actuation -->
      <h4 class="mt-4">3. Actuation Type</h4>

      <label class="form-label">Actuation Type</label>
      <select class="form-control mb-2" name="actuation_type" required>
        <option value="">-- Select --</option>
        <option>Electric</option>
        <option>Pneumatic</option>
        <option>Manual</option>
      </select>

      <input class="form-control mb-2" type="text" name="voltage" placeholder="Voltage (e.g. 230V, 24V)">
      
      <label class="form-label">Control Type</label>
      <select class="form-control mb-2" name="control_type">
        <option value="">-- Select --</option>
        <option>On/Off</option>
        <option>Modulating</option>
      </select>

      <input class="form-control mb-2" type="text" name="signal_type" placeholder="Signal Type (4-20 mA, 0-10V)">
      <input class="form-control mb-2" type="text" name="enclosure_rating" placeholder="Enclosure Rating (e.g. IP65)">
      <input class="form-control mb-2" type="text" name="manual_override" placeholder="Manual Override (Yes/No)">
      <input class="form-control mb-2" type="text" name="air_supply" placeholder="Air Supply Pressure (bar)">
      <input class="form-control mb-2" type="text" name="positioner" placeholder="Positioner (Yes/No)">
      <input class="form-control mb-2" type="text" name="solenoid_valve" placeholder="Solenoid Valve Type">
      <input class="form-control mb-2" type="text" name="limit_switches" placeholder="Limit Switches (Yes/No)">
      <input class="form-control mb-2" type="text" name="frl" placeholder="Filter/Regulator/Lubricator (Yes/No)">

      <!-- Application Constraints -->
      <h4 class="mt-4">4. Application Constraints</h4>
      <input class="form-control mb-2" type="text" name="cycle_frequency" placeholder="Cycle Frequency (e.g. 50/h)">
      <input class="form-control mb-2" type="text" name="opening_speed" placeholder="Opening Speed (Fast/Slow)">
      <input class="form-control mb-2" type="text" name="space" placeholder="Available Space">
      <input class="form-control mb-2" type="text" name="conditions" placeholder="Ambient Conditions (e.g. outdoor, humid)">
      
      <label class="form-label">Certifications</label>
      <select class="form-control mb-2" name="certifications">
        <option value="">-- Select --</option>
        <option>CE</option>
        <option>ATEX</option>
        <option>PED</option>
        <option>ISO</option>
        <option>None</option>
      </select>

      <button class="btn btn-primary mt-3" type="submit">Submit</button>
    </form>

    {% if result %}
    <div class="alert alert-success mt-4">
      <strong>{{ result }}</strong>
      <pre>{{ data | tojson(indent=2) }}</pre>
    </div>
    {% endif %}

    {% if recommendations %}
    <div class="alert alert-warning mt-4">
      <h5>Recommended by Valve Advisor:</h5>
      <ul>
        <li><strong>Recommended Seat Type:</strong> {{ recommendations.seat_type }}</li>
        <li><strong>Recommended Body Material:</strong> {{ recommendations.body_material }}</li>
        <li><strong>Recommended Actuation:</strong> {{ recommendations.actuation }}</li>
      </ul>
    </div>
    {% endif %}
  </div>
</body>
</html>
